<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PlayerME Realtime Demo</title>

    <script type="text/javascript" src="dist/playerme.realtime.js"></script>
    <script type="text/javascript">
        console.log("PlayerMe", PlayerMe);
        var RealtimeService = PlayerMe.Realtime.RealtimeService;

        var service = new RealtimeService();
        service.connect('https://player.me:443');

        console.log(">> verify");
        service.verify(function(body, JWR){
            console.log("<< verify", {
                body: body,
                JWR: JWR,
                arguments: arguments
            });

            console.log(">> subscribeToFeed");
            service.subscribeToFeed();

            var testText = "woo";
            console.log(">> sendTest", testText);
            service.sendTest(testText);
        });

        service.onTest(function(payload){
            console.log('<< onTest', payload);
        });
        service.onFeedUpdate(function(payload){
            console.log('<< onFeedUpdate', payload);
            console.log('>> subscribeToActivity', payload.activity.id);
            service.subscribeToActivity(payload.activity.id);
        });

        service.onActivityUpdate(function(payload){
            console.log('<< onActivityUpdate', payload);
        });

    </script>
</head>
<body>

</body>
</html>